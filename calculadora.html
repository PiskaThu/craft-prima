<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longbook Factory v3.1</title>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/7h6krvDT/icon-prism.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="calc-page">

    <div id="loading-screen" class="loading-screen hidden">
        <img src="https://i.postimg.cc/7h6krvDT/icon-prism.png" alt="Logo Prisma" class="logo-img">
        <div class="loading-spinner"></div>
        <p class="loading-text">Carregando...</p>
    </div>

    <div class="calc-container">
        <div class="logo-header">
            <img src="https://i.postimg.cc/7h6krvDT/icon-prism.png" alt="Logo Prisma" class="logo-img">
            <h2>LongBook Calculator</h2>
        </div>
        <p class="subtitle">System Version 3.1 - Resource Splitter</p>

        <div class="goal-section">
            <label>üéØ Quantos Longbooks planeja fabricar?</label>
            <input type="number" id="meta" placeholder="Digite a quantidade" oninput="calcular()">
        </div>

        <div class="btn-group-triple">
            <button class="btn-clear" onclick="limpar()">Limpar</button>

            <a href="index.html" class="btn-action btn-back-center" id="back-link">Voltar</a>
        </div>

        <div id="result" style="display:none">
            <div class="section-title">üì¶ Pe√ßas para Fabricar</div>
            <div class="res-card" id="lista-pecas"></div>

            <div class="section-title">‚öôÔ∏è Materiais para fabricar os componentes</div>
            <div class="res-card" id="materias-necessarias"></div>
        </div>
    </div>

    <script>
        // Loading screen ao navegar
        document.addEventListener("DOMContentLoaded", () => {
            const loadingScreen = document.getElementById("loading-screen");
            const backLink = document.getElementById("back-link");
            
            function showLoading() {
                if (loadingScreen) {
                    loadingScreen.classList.remove("hidden");
                }
            }
            
            if (backLink) {
                backLink.addEventListener("click", (e) => {
                    e.preventDefault();
                    showLoading();
                    setTimeout(() => {
                        window.location.href = backLink.getAttribute("href");
                    }, 600);
                });
            }

            // Esconde o loading quando a p√°gina carregar
            window.addEventListener("load", () => {
                setTimeout(() => {
                    if (loadingScreen) {
                        loadingScreen.classList.add("hidden");
                    }
                }, 600);
            });
        });

        function calcular() {
            const metaInput = parseInt(document.getElementById('meta').value);
            let qty = (!isNaN(metaInput) && metaInput > 0) ? metaInput : 0;

            if (qty > 0) {
                document.getElementById('result').style.display = 'block';
            } else {
                document.getElementById('result').style.display = 'none';
            }

            // URLs das imagens dos itens
            const itemImages = {
                hd: 'https://i.postimg.cc/qt0X3PYY/hd.png',
                hackdevice: 'https://i.postimg.cc/gwdqZC5S/hackdevice.png',
                chipprocess: 'https://i.postimg.cc/sBy9hk8c/chipprocess.png',
                screen: 'https://i.postimg.cc/v1z7LPwy/screen.png',
                rubber: 'https://i.postimg.cc/KKN7r9h2/rubber.png',
                battery: 'https://i.postimg.cc/WDj6kBK7/battery.png'
            };

            // Pe√ßas para Fabricar - TUDO incluindo borrachas e pilhas
            document.getElementById('lista-pecas').innerHTML = `
                <div class="res-item">
                    <span><img src="${itemImages.hd}" alt="HD Sata" class="item-icon"> HD Sata</span>
                    <span class="success">${qty}x</span>
                </div>
                <div class="res-item">
                    <span><img src="${itemImages.hackdevice}" alt="Placa Eletr√¥nica" class="item-icon"> Placa Eletr√¥nica</span>
                    <span class="success">${qty}x</span>
                </div>
                <div class="res-item">
                    <span><img src="${itemImages.chipprocess}" alt="Processador" class="item-icon"> Processador</span>
                    <span class="success">${qty}x</span>
                </div>
                <div class="res-item">
                    <span><img src="${itemImages.screen}" alt="Tela LCD" class="item-icon"> Tela LCD</span>
                    <span class="success">${qty}x</span>
                </div>
                <div class="res-item">
                    <span><img src="${itemImages.rubber}" alt="Borracha" class="item-icon"> Borrachas Separadas</span>
                    <span class="info-val">${qty * 5}x</span>
                </div>
                <div class="res-item">
                    <span><img src="${itemImages.battery}" alt="Pilha" class="item-icon"> Pilhas Separadas</span>
                    <span class="info-val">${qty * 1}x</span>
                </div>
            `;

            // Mat√©rias Necess√°rias APENAS para os componentes principais (HD, Placa, Processador, Tela LCD)
            // Receitas dos componentes:
            // HD: aluminum x5, rubber x3, plastic x3
            // Placa Eletr√¥nica: rubber x3, techtrash x10
            // Processador: plastic x1, techtrash x2, battery x1, rubber x3
            // Tela LCD: glass x3, techtrash x5, battery x1, rubber x3
            // Total por componente: rubber x12, techtrash x17, battery x2, plastic x4, aluminum x5, glass x3
            const custoComponentes = {
                b: 12,  // Borracha: 3+3+3+3 = 12
                l: 17,  // Lixo Eletr√¥nico: 10+2+5 = 17
                p: 2,   // Pilha: 1+1 = 2
                pl: 4,  // Pl√°stico: 3+1 = 4
                al: 5,  // Alum√≠nio: 5
                vi: 3   // Vidro: 3
            };

            // URLs das imagens das mat√©rias
            const materiaImages = {
                rubber: 'https://i.postimg.cc/KKN7r9h2/rubber.png',
                techtrash: 'https://i.postimg.cc/zv3QxW3f/techtrash.png',
                battery: 'https://i.postimg.cc/WDj6kBK7/battery.png',
                plastic: 'https://i.postimg.cc/Ny487Nvh/plastic.png',
                aluminum: 'https://i.postimg.cc/06xdwT3d/aluminum.png',
                glass: 'https://i.postimg.cc/gwdqZC5N/glass.png'
            };

            const materias = [
                {nome: 'Borracha', image: materiaImages.rubber, total: qty * custoComponentes.b},
                {nome: 'Lixo Eletr√¥nico', image: materiaImages.techtrash, total: qty * custoComponentes.l},
                {nome: 'Pilha', image: materiaImages.battery, total: qty * custoComponentes.p},
                {nome: 'Pl√°stico', image: materiaImages.plastic, total: qty * custoComponentes.pl},
                {nome: 'Alum√≠nio', image: materiaImages.aluminum, total: qty * custoComponentes.al},
                {nome: 'Vidro', image: materiaImages.glass, total: qty * custoComponentes.vi}
            ];

            document.getElementById('materias-necessarias').innerHTML = materias.map(m => `
                <div class="res-item">
                    <span><img src="${m.image}" alt="${m.nome}" class="item-icon"> ${m.nome}</span>
                    <span class="info-val">${m.total}x</span>
                </div>
            `).join('');
        }

        function limpar() {
            document.getElementById('meta').value = '';
            document.getElementById('result').style.display = 'none';
        }
    </script>
</body>
</html>